<h2>Orders</h2>
<a href="index.html">Back to Dashboard</a>
<div id="orders"></div>

<script type="module">
import { onAuthChange, getOrders } from '../firebase.js';

onAuthChange(user=>{
  if(!user) window.location.href = "../login.html";
});

const ordersDiv = document.getElementById("orders");

async function loadOrders(){
  ordersDiv.innerHTML = "";
  const snapshot = await getOrders();
  snapshot.forEach(doc=>{
    const data = doc.data();
    const div = document.createElement("div");
    div.innerHTML = `
      <h4>Order by: ${data.userEmail}</h4>
      <p>Total: $${data.total}</p>
      <p>Products: ${data.products.map(p=>p.name).join(", ")}</p>
      <hr>
    `;
    ordersDiv.appendChild(div);
  });
}

loadOrders();
</script>

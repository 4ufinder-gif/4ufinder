<!DOCTYPE html>
<html>
<head>
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family:Arial; padding:20px; }
button { padding:10px; background:#ff9900; border:none; }
</style>
</head>

<body>

<h1>4uFinder Admin Dashboard</h1>
<p>Welcome Admin ðŸ‘‹</p>

<button onclick="logout()">Logout</button>

<script>
if (localStorage.getItem("admin") !== "true") {
  window.location.href = "admin-login.html";
}

function logout() {
  localStorage.removeItem("admin");
  window.location.href = "admin-login.html";
}
</script>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
<title>4uFinder Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body { font-family:Arial; padding:20px; background:#f4f4f4; }
input, button { padding:10px; margin:5px 0; width:100%; }
.card { background:#fff; padding:15px; margin:10px 0; border-radius:6px; }
button { background:#ff9900; border:none; cursor:pointer; }
.del { background:red; color:white; }
</style>
</head>

<body>

<h2>ðŸ›  4uFinder Admin â€“ Products</h2>

<!-- ADD PRODUCT -->
<input id="id" placeholder="Product ID">
<input id="name" placeholder="Product Name">
<input id="price" placeholder="Price">
<input type="file" id="imageFile" accept="image/*">
<input id="category" placeholder="Category">
<button onclick="addProduct()">âž• Add / Update Product</button>

<hr>

<h3>ðŸ“¦ Products</h3>
<div id="products"></div>

<script>
const API = "https://sheetdb.io/api/v1/zq8bztk2qn6kx"; // CHANGE THIS

// PROTECT PAGE
if (localStorage.getItem("admin") !== "true") {
  location.href = "admin-login.html";
}

// LOAD PRODUCTS
function loadProducts() {
  fetch(API)
    .then(res => res.json())
    .then(data => {
      let html = "";
      data.forEach(p => {
        html += `
          <div class="card">
            <b>${p.name}</b> ($${p.price})<br>
            ${p.category}<br>
            <button class="del" onclick="deleteProduct('${p.id}')">Delete</button>
          </div>
        `;
      });
      document.getElementById("products").innerHTML = html;
    });
}
loadProducts();

// ADD / UPDATE PRODUCT
function addProduct() {
  fetch(API, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      data: [{
        id: id.value,
        name: name.value,
        price: price.value,
        image: image.value,
        category: category.value
      }]
    })
  }).then(() => {
    alert("Product saved");
    loadProducts();
  });
}
<button onclick="addProduct()">âž• Add Product</button>

// DELETE PRODUCT
function deleteProduct(id) {
  fetch(`${API}/id/${id}`, { method: "DELETE" })
    .then(() => loadProducts());
}
</script>
<script>
const API = "https://sheetdb.io/api/v1/zq8bztk2qn6kx"; // YOUR SheetDB
const CLOUD_NAME = "dxuxsa5bg";
const UPLOAD_PRESET = "cludes7u";

// SECURITY
if (localStorage.getItem("admin") !== "true") {
  location.href = "admin-login.html";
}

// ADD PRODUCT
async function addProduct() {
  const file = document.getElementById("imageFile").files[0];
  if (!file) return alert("Select an image");

  // 1ï¸âƒ£ Upload image to Cloudinary
  let formData = new FormData();
  formData.append("file", file);
  formData.append("upload_preset", UPLOAD_PRESET);

  let res = await fetch(
    `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,
    { method: "POST", body: formData }
  );

  let imgData = await res.json();

  // 2ï¸âƒ£ Save product to Google Sheets
  fetch(API, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      data: [{
        id: id.value,
        name: name.value,
        price: price.value,
        image: imgData.secure_url,
        category: category.value
      }]
    })
  }).then(() => {
    alert("Product added!");
    loadProducts();
  });
}
</script>

</body>
</html>


